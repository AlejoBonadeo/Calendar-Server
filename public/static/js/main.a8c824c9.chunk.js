(this["webpackJsonpcalendar-gropo-11"]=this["webpackJsonpcalendar-gropo-11"]||[]).push([[0],{122:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(7),c=n.n(r),o=n(10),s=n(34),i=n(9),u=n(12),l=n.n(u),d=n(21),j=n(18),b=n.n(j),m="https://grupo-11-calendar.herokuapp.com/api",v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(m,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(m,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},p={uiOpenModal:"[ui] Open Modal",uiCloseModal:"[ui] Close Modal",eventSetActive:"[event] Set Active",eventStartAddNew:"[event] Start Add New",eventAddNew:"[event] Add New",eventClearActive:"[event] Clear Active",eventUpdate:"[event] Update",eventDelete:"[event] Delete",eventLoaded:"[event] Loaded",eventLogOut:"[event] Log Out",authCheckingFinish:"[auth] Finish Checking Login State",authStartLogin:"[auth] Start Login",authLogin:"[auth] Login",authStartRegister:"[auth] Start Register",authStartRenewToken:"[auth] Start Renew Token",authLogout:"[auth] Start Renew Token"},h=function(e){return{type:p.authLogin,payload:e}},f=function(){return{type:p.authCheckingFinish}},g=function(){return{type:p.authLogout}},x=n(17),w=n(25),y=n(5),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(x.a)(t,2),r=n[0],c=n[1],o=function(){c(e)},s=function(e){var t=e.target;c(Object(y.a)(Object(y.a)({},r),{},Object(w.a)({},t.name,t.value)))};return[r,s,o]},k=n(2),S=function(){var e=Object(o.b)(),t=N({logEmail:"",logPassword:""}),n=Object(x.a)(t,2),a=n[0],r=n[1],c=a.logEmail,s=a.logPassword,i=N({regName:"",regEmail:"",regPassword:"",regPassword2:""}),u=Object(x.a)(i,2),j=u[0],m=u[1],O=j.regName,p=j.regEmail,f=j.regPassword,g=j.regPassword2;return Object(k.jsx)("div",{className:"container login__container",children:Object(k.jsxs)("div",{className:"row",children:[Object(k.jsxs)("div",{className:"col-md-6 login__form-1",children:[Object(k.jsx)("h3",{children:"Log In"}),Object(k.jsxs)("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=c,a=s,function(){var e=Object(d.a)(l.a.mark((function e(t){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("auth",{email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(h({uid:c.uid,name:c.name}))):b.a.fire("Error",c.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"logEmail",value:c,onChange:r})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"logPassword",value:s,onChange:r})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"submit",className:"login__btnSubmit",value:"Log In"})})]})]}),Object(k.jsxs)("div",{className:"col-md-6 login__form-2",children:[Object(k.jsx)("h3",{children:"Register"}),Object(k.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),f!==g)return b.a.fire("Error","Passwords Should Match","error");var n,a,r;e((n=p,a=f,r=O,function(){var e=Object(d.a)(l.a.mark((function e(t){var c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("auth/new",{email:n,password:a,name:r},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:(o=e.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(h({uid:o.uid,name:o.name}))):b.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",name:"regName",value:O,onChange:m})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"regEmail",value:p,onChange:m})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"regPassword",value:f,onChange:m})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",className:"form-control",placeholder:"Repeat Password",name:"regPassword2",value:g,onChange:m})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"submit",className:"login__btnSubmit",value:"Create Account"})})]})]})]})})},E=n(51),C=n(13),A=n.n(C),D=(n(90),n(26)),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{end:A()(e.end).toDate(),start:A()(e.start).toDate()})}))},_=function(e){return{type:p.eventAddNew,payload:e}},P=function(){return{type:p.eventClearActive}},T=function(e){return{type:p.eventUpdate,payload:e}},I=function(e){return{type:p.eventLoaded,payload:e}},M=function(){var e=Object(o.c)((function(e){return e.auth})).name,t=Object(o.b)();return Object(k.jsxs)("div",{className:"navbar navbar-dark bg-dark mb-4",children:[Object(k.jsx)("span",{className:"navbar-brand",children:e}),Object(k.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){t((function(e){localStorage.clear(),e(g())})),t({type:p.eventLogOut})},children:[Object(k.jsx)(D.b,{}),Object(k.jsx)("span",{children:" Log Out"})]})]})},R=function(e){var t=e.event,n=t.title,a=t.user;return Object(k.jsxs)("div",{children:[Object(k.jsx)("h6",{children:n}),Object(k.jsxs)("strong",{children:["- ",a.name]})]})},G=n(47),U=n.n(G),F=n(48),J=n.n(F),V=function(){return{type:p.uiOpenModal}},q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},B={title:"Event",notes:"",start:A()().minutes(0).seconds(0).add(1,"hours").toDate(),end:A()().minutes(0).seconds(0).add(2,"hours").toDate()};U.a.setAppElement("#root");var H=function(){var e=Object(a.useState)(A()().minutes(0).seconds(0).add(1,"hours").toDate()),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(A()().minutes(0).seconds(0).add(2,"hours").toDate()),s=Object(x.a)(c,2),i=s[0],u=s[1],j=Object(a.useState)({title:"Event",notes:"",start:A()().minutes(0).seconds(0).add(1,"hours").toDate(),end:A()().minutes(0).seconds(0).add(2,"hours").toDate()}),m=Object(x.a)(j,2),v=m[0],h=m[1],f=v.title,g=v.notes,N=v.start,S=v.end,E=Object(o.b)(),C=Object(o.c)((function(e){return e.ui})).modalOpen,D=Object(o.c)((function(e){return e.calendar})).activeEvent;Object(a.useEffect)((function(){D?(h(D),r(D.start),u(D.end)):h(B)}),[D]);var L=function(e){var t=e.target;h(Object(y.a)(Object(y.a)({},v),{},Object(w.a)({},t.name,t.value)))},I=function(){E({type:p.uiCloseModal}),E(P()),h(B)};return Object(k.jsxs)(U.a,{isOpen:C,onRequestClose:I,style:q,className:"modal",closeTimeoutMS:200,overlayClassName:"modal__fondo",children:[Object(k.jsxs)("h1",{children:[" ",D?"Edit Event":"New Event"," "]}),Object(k.jsx)("hr",{}),Object(k.jsxs)("form",{className:"container",onSubmit:function(e){if(e.preventDefault(),A()(N).isSameOrAfter(A()(S)))return b.a.fire("Error","Start date should be before end date!","error");var t;E(D?(t=v,function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("events/".concat(t.id),t,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:(r=e.sent).ok?n(T(t)):b.a.fire("Error",r.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n,a){var r,c,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth,c=r.uid,o=r.name,t.prev=1,t.next=4,O("events",e,"POST");case 4:return s=t.sent,t.next=7,s.json();case 7:(i=t.sent).ok&&(e.id=i.event.id,e.user={_id:c,name:o},n(_(e))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(v)),I()},children:[Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Starts"}),Object(k.jsx)(J.a,{onChange:function(e){r(e),h(Object(y.a)(Object(y.a)({},v),{},{start:e}))},value:n,className:"form-control"})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Ends"}),Object(k.jsx)(J.a,{onChange:function(e){u(e),h(Object(y.a)(Object(y.a)({},v),{},{end:e}))},value:i,className:"form-control",minDate:n})]}),Object(k.jsx)("hr",{}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{children:"Title and notes"}),Object(k.jsx)("input",{type:"text",className:"form-control",placeholder:"Title",name:"title",value:f,onChange:L,autoComplete:"off",required:!0}),Object(k.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Brief Description"})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("textarea",{type:"text",className:"form-control",placeholder:"Notes",rows:"5",name:"notes",value:g,onChange:L}),Object(k.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Additional Info"})]}),Object(k.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(k.jsx)("i",{className:"far fa-save"}),Object(k.jsx)("span",{children:" Guardar"})]})]})]})},X=function(){var e=Object(o.b)();return Object(k.jsx)("button",{className:"btn btn-primary fab",onClick:function(){e(P),e(V())},children:Object(k.jsx)(D.a,{})})},z=function(){var e=Object(o.b)();return Object(k.jsxs)("button",{className:"btn btn-danger fab-danger",onClick:function(){e(function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n().calendar.activeEvent,e.next=4,O("events/".concat(a.id),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:(c=e.sent).ok?t({type:p.eventDelete}):b.a.fire("Error",c.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(k.jsx)(D.c,{}),Object(k.jsx)("span",{children:" Delete"})]})},W=Object(E.b)(A.a),K=function(){var e=Object(a.useState)(localStorage.getItem("lastView")||"month"),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(o.b)(),s=Object(o.c)((function(e){return e.calendar})),i=s.events,u=s.activeEvent;Object(a.useEffect)((function(){c(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("events");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=L(a.events),t(I(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[c]);return Object(k.jsxs)("div",{className:"calendar__screen",children:[Object(k.jsx)(M,{}),Object(k.jsx)(E.a,{localizer:W,events:i,startAccessor:"start",endAccessor:"end",eventPropGetter:function(e,t,n,a){return{style:{backgroundColor:"#367CF7",borderRadius:"0px",opacity:.8,display:"block",color:"white"}}},onDoubleClickEvent:function(e){c(V())},onSelectEvent:function(e){c({type:p.eventSetActive,payload:e})},onSelectSlot:function(e){c(P())},selectable:!0,onView:function(e){r(e),localStorage.setItem("lastView",e)},view:n,components:{event:R}}),Object(k.jsx)(H,{}),u&&Object(k.jsx)(z,{}),Object(k.jsx)(X,{})]})},Q=n(37),Y=["isAuthenticated","component"],Z=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Q.a)(e,Y);return Object(k.jsx)(i.b,Object(y.a)(Object(y.a)({},a),{},{component:function(e){return t?Object(k.jsx)(n,Object(y.a)({},e)):Object(k.jsx)(i.a,{to:"/login"})}}))},$=["isAuthenticated","component"],ee=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Q.a)(e,$);return Object(k.jsx)(i.b,Object(y.a)(Object(y.a)({},a),{},{component:function(e){return t?Object(k.jsx)(i.a,{to:"/"}):Object(k.jsx)(n,Object(y.a)({},e))}}))},te=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})),n=t.checking,r=t.uid;return Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(h({uid:a.uid,name:a.name}))):t(f());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(k.jsx)("h1",{children:"Please Wait..."}):Object(k.jsx)(s.a,{children:Object(k.jsx)("div",{children:Object(k.jsxs)(i.d,{children:[Object(k.jsx)(Z,{exact:!0,path:"/",component:K,isAuthenticated:!!r}),Object(k.jsx)(ee,{exact:!0,path:"/login",component:S,isAuthenticated:!!r}),Object(k.jsx)(i.a,{to:"/"})]})})})},ne=n(27),ae=n(67),re={checking:!0},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.authLogin:return Object(y.a)(Object(y.a)(Object(y.a)({},e),t.payload),{},{checking:!1});case p.authCheckingFinish:return Object(y.a)(Object(y.a)({},e),{},{checking:!1});case p.authLogout:return{checking:!1};default:return e}},oe=n(52),se={events:[],activeEvent:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.eventSetActive:return Object(y.a)(Object(y.a)({},e),{},{activeEvent:t.payload});case p.eventAddNew:return Object(y.a)(Object(y.a)({},e),{},{events:[].concat(Object(oe.a)(e.events),[t.payload])});case p.eventClearActive:return Object(y.a)(Object(y.a)({},e),{},{activeEvent:null});case p.eventUpdate:return Object(y.a)(Object(y.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case p.eventDelete:return Object(y.a)(Object(y.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.activeEvent.id})),activeEvent:null});case p.eventLoaded:return Object(y.a)(Object(y.a)({},e),{},{events:Object(oe.a)(t.payload)});case p.eventLogOut:return se;default:return e}},ue={modalOpen:!1},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.uiOpenModal:return Object(y.a)(Object(y.a)({},e),{},{modalOpen:!0});case p.uiCloseModal:return Object(y.a)(Object(y.a)({},e),{},{modalOpen:!1});default:return e}},de=Object(ne.b)({ui:le,calendar:ie,auth:ce}),je="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.c,be=Object(ne.d)(de,je(Object(ne.a)(ae.a))),me=function(){return Object(k.jsx)(o.a,{store:be,children:Object(k.jsx)(te,{})})};n(122);c.a.render(Object(k.jsx)(me,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.a8c824c9.chunk.js.map